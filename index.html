<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>qweqwe</title>
<script type="text/javascript">
var Pushwoosh = Pushwoosh || [];
Pushwoosh.push(['init', {
    logLevel: 'info', // possible values: error, info, debug
    applicationCode: '738AF-FD1A', // you application code from Pushwoosh Control Panel
    safariWebsitePushID: 'web.com.example.domain', //  unique reverse-domain string, obtained in you Apple Developer Portal. Only needed if you send push notifications to Safari browser
    defaultNotificationTitle: 'Pushwoosh', // sets a default title for push notifications
    defaultNotificationImage: 'https://yoursite.com/img/logo-medium.png', // URL to custom custom notification image
    autoSubscribe: false, // or true. If true, prompts a user to subscribe for pushes upon SDK initialization
    subscribeWidget: {
      enabled: true
    },
    userId: 'user_id', // optional, set custom user ID
    tags: {
        'Name': 'John Smith'   	// optional, set custom Tags
    }										
}]);
</script>
</head>
<body bgcolor="white">
<h1>Test Page</h1>

<link rel="manifest" href="/manifest.json"></link>
<script type="text/javascript" src="//cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js" async></script>

<script>
function click(){
    var akPush = new AKPush()
    try {
        console.log("click OK")
        akPush.initSubscription();

    } catch (e) {
        console.log("error:",e)
    }
}
function onClick(){

    console.log("click OK")
    var akPush = new AKPush();
    akPush.initSubscription();
}
</script>
<script>
Pushwoosh.push(function(api) {
  var myCustomTags = {
    'Tag 1': 123,
    'Tag 2': 'some string'
  };
  api.setTags(myCustomTags)
    .then(function(res) {
      var skipped = res && res.skipped || [];
      if (!skipped.length) {
        console.log('success');
      }
      else {
        console.warn('skipped tags:', skipped);
      }
    })
    .catch(function(err) {
      console.error('setTags error:', err);
    });
});
</script>
<button onclick="Pushwoosh.subscribe()">Subscribe</button>
<script>
  Pushwoosh.push(['onSubscribe', function(api) {
    console.log('User successfully subscribed');
  }]);
</script>
</body>
</html>
